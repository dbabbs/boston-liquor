{"version":3,"sources":["here.js","config.js","SCENE.js","MapContainer.js","App.js","serviceWorker.js","index.js"],"names":["hereCredentials","xyz","hereIsolineUrl","coords","range","concat","hereReverseGeocodeUrl","coordinates","categories","label","id","active","background","SCENE","cameras","camera1","type","sources","xyz_osm","url","max_zoom","_boston_alcohol","url_params","access_token","global","language","language_text_source","layers","boston_alcohol","data","source","draw","points","color","size","order","interactive","collide","places","city-points","filter","kind","kind_detail","$zoom","max","text","text_source","priority","font","family","fill","stroke","width","transform","buffer","earth","polygons","landuse","water","roads","not","lines","cap","highway","outline","minor_road","buildings","3d-buildings","min","extrude","MapContainer","_React$Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleDrag","marker","current","leafletElement","getLatLng","handleMarkerMove","lat","lng","handleClick","evt","latlng","React","createRef","state","loaded","scene","layer","inherits","createClass","key","value","_this2","setState","Tangram","leafletLayer","subscribe","load","addTo","map","config","filterTags","join","updateConfig","console","log","_this3","greenIcon","L","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","react_default","a","createElement","Map","ref","center","zoom","zoomControl","onClick","markerPosition","length","Marker","position","draggable","onDragEnd","icon","polygon","Polygon","positions","Component","App","componentDidMount","fetch","then","res","json","updatePolygon","hasOwnProperty","turfPoly","response","isoline","component","shape","x","Number","split","tags","pointsWithinPolygon","features","feature","properties","Index","updateAddressText","address","Response","View","Result","Location","Address","undefined","HouseNumber","Street","City","handleSlide","target","handleClearMarker","handleCategoryFilter","copy","slice","c","name","startCoordinates","className","cat","i","style","onChange","href","MapContainer_MapContainer","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.64d7e23f.chunk.js","sourcesContent":["const hereCredentials = {\n   id: 'UQ75LhFcnAv0DtOUwBEA',\n   code: 'f5nyezNmYF4wvuJqQgNSkg'\n}\n\nconst xyz = {\n   space: 'Vv1iS7FJ',\n   token: 'AbuvUKANJJEZR4nb1zkEXBE'\n}\n\nconst hereIsolineUrl = (coords, range) => `https://isoline.route.api.here.com/routing/7.2/calculateisoline.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&mode=shortest;pedestrian;traffic:disabled&start=geo!${coords[0]},${coords[1]}&range=${range * 60}&rangetype=time`\n\nconst maxIsolineRangeLookup = {\n   time: 5000,\n   distance: 80000\n}\n\nconst hereGeocoderUrl = (query) => `https://geocoder.api.here.com/6.2/geocode.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&searchtext=${query}`;\n\nconst hereReverseGeocodeUrl = (coordinates) => `https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=${coordinates[0]},${coordinates[1]},250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=${hereCredentials.id}&app_code=${hereCredentials.code}`;\n\nexport {\n   hereCredentials,\n   xyz,\n   hereIsolineUrl,\n   maxIsolineRangeLookup,\n   hereGeocoderUrl,\n   hereReverseGeocodeUrl\n}\n","const categories = [\n   {\n      label: 'All Alcohol',\n      id: 'All_Alcohol',\n      active: true,\n      background: '#3C4BF1'\n   },\n   {\n      label: 'Malt & Wine',\n      id: 'Malt_Wine',\n      active: true,\n      background: '#50D05E'\n   },\n   {\n      label: 'Malt, Wine, Liquor',\n      id: 'Malt_Wine_Liquor',\n      active: true,\n      background: '#E265F0'\n   },\n   {\n      label: 'Tavern',\n      id: 'Tavern',\n      active: true,\n      background: '#EC3B43'\n   },\n   {\n      label: 'Farmer',\n      id: 'Farmer',\n      active: true,\n      background: '#8BFFF2'\n   },\n   {\n      label: 'Other',\n      id: 'Other',\n      active: true,\n      background: 'yellow'\n   }\n]\n\nexport { categories };\n","import { xyz } from './here.js';\nimport { categories } from './config';\nconst SCENE = {\n\t\"cameras\": {\n\t\t\"camera1\": {\n\t\t\t\"type\": \"perspective\"\n\t\t}\n\t},\n\t\"sources\": {\n\t\t\"xyz_osm\": {\n\t\t\t\"type\": \"MVT\",\n\t\t\t\"url\": \"https://xyz.api.here.com/tiles/osmbase/256/all/{z}/{x}/{y}.mvt\",\n\t\t\t\"max_zoom\": 16\n\t\t},\n\t\t\"_boston_alcohol\": {\n\t\t\t\"type\": \"GeoJSON\",\n\t\t\t\"url\": `https://xyz.api.here.com/hub/spaces/${xyz.space}/tile/web/{z}_{x}_{y}`,\n\t\t\t\"url_params\": {\n\t\t\t\t\"access_token\": xyz.token\n\t\t\t}\n\t\t}\n\t},\n\t\"global\": {\n\t\t\"language\": \"en\",\n\t\t\"language_text_source\": \"function() {\\n    // Use preferred language label if available\\n    return (global.language && feature['name:'+global.language]) || feature.name;\\n}\\n\"\n\t},\n\t\"layers\": {\n\t\t\"boston_alcohol\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"_boston_alcohol\"\n\t\t\t},\n\t\t\t\"draw\": {\n\t\t\t\t\"points\": {\n\t\t\t\t\t\"color\": \"function() {\\n    console.log(feature)\\n    if (feature.Description === 'All_Alcohol') {\\n        return '#3C4BF1';\\n    } else if (feature.Description === 'Farmer') {\\n        return '#8BFFF2'\\n    } else if (feature.Description === 'Malt_Wine') {\\n        return '#50D05E'\\n    } else if (feature.Description === 'Malt_Wine_Liquor') {\\n        return '#E265F0'\\n    } else if (feature.Description === 'Other') {\\n        return 'yellow'\\n    } else if (feature.Description === 'Tavern') {\\n        return '#EC3B43'\\n    }\\n}\\n\",\n\t\t\t\t\t\"size\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t13,\n\t\t\t\t\t\t\t\"7.5px\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t16,\n\t\t\t\t\t\t\t\"16px\"\n\t\t\t\t\t\t]\n\t\t\t\t\t],\n\t\t\t\t\t\"order\": 10000,\n\t\t\t\t\t\"interactive\": true,\n\t\t\t\t\t\"collide\": false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"places\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"xyz_osm\"\n\t\t\t},\n\t\t\t\"city-points\": {\n\t\t\t\t\"filter\": {\n\t\t\t\t\t\"kind\": \"locality\",\n\t\t\t\t\t\"kind_detail\": \"city\",\n\t\t\t\t\t\"$zoom\": {\n\t\t\t\t\t\t\"max\": 18\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"draw\": {\n\t\t\t\t\t\"text\": {\n\t\t\t\t\t\t\"text_source\": \"global.language_text_source\",\n\t\t\t\t\t\t\"priority\": 10,\n\t\t\t\t\t\t\"order\": 999,\n\t\t\t\t\t\t\"font\": {\n\t\t\t\t\t\t\t\"family\": \"Lato\",\n\t\t\t\t\t\t\t\"fill\": \"#C3CDD4\",\n\t\t\t\t\t\t\t\"stroke\": {\n\t\t\t\t\t\t\t\t\"color\": \"white\",\n\t\t\t\t\t\t\t\t\"width\": 4\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"transform\": \"uppercase\",\n\t\t\t\t\t\t\t\"size\": [\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t4,\n\t\t\t\t\t\t\t\t\t\"15px\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t8,\n\t\t\t\t\t\t\t\t\t\"18px\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t12,\n\t\t\t\t\t\t\t\t\t\"26px\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"buffer\": \"2px\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"earth\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"xyz_osm\"\n\t\t\t},\n\t\t\t\"draw\": {\n\t\t\t\t\"polygons\": {\n\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\"color\": \"white\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"landuse\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"xyz_osm\"\n\t\t\t},\n\t\t\t\"draw\": {\n\t\t\t\t\"polygons\": {\n\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\"color\": \"#E9EEF1\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"water\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"xyz_osm\"\n\t\t\t},\n\t\t\t\"draw\": {\n\t\t\t\t\"polygons\": {\n\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\"color\": \"#DEE1E3\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"roads\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"xyz_osm\"\n\t\t\t},\n\t\t\t\"filter\": {\n\t\t\t\t\"not\": {\n\t\t\t\t\t\"kind\": [\n\t\t\t\t\t\t\"path\",\n\t\t\t\t\t\t\"rail\",\n\t\t\t\t\t\t\"ferry\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"draw\": {\n\t\t\t\t\"lines\": {\n\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\"color\": \"#C3CDD4\",\n\t\t\t\t\t\"width\": 8,\n\t\t\t\t\t\"cap\": \"round\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"highway\": {\n\t\t\t\t\"filter\": {\n\t\t\t\t\t\"kind\": \"highway\"\n\t\t\t\t},\n\t\t\t\t\"draw\": {\n\t\t\t\t\t\"lines\": {\n\t\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\t\"color\": \"#D3DCE1\",\n\t\t\t\t\t\t\"width\": [\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t5,\n\t\t\t\t\t\t\t\t5000\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t8,\n\t\t\t\t\t\t\t\t800\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t10,\n\t\t\t\t\t\t\t\t200\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t12,\n\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t14,\n\t\t\t\t\t\t\t\t40\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t18,\n\t\t\t\t\t\t\t\t20\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"outline\": {\n\t\t\t\t\t\t\t\"color\": \"#EEEEEE\",\n\t\t\t\t\t\t\t\"width\": [\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t16,\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t18,\n\t\t\t\t\t\t\t\t\t1.5\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"minor_road\": {\n\t\t\t\t\"filter\": {\n\t\t\t\t\t\"kind\": \"minor_road\"\n\t\t\t\t},\n\t\t\t\t\"draw\": {\n\t\t\t\t\t\"lines\": {\n\t\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\t\"color\": \"#F8FAFB\",\n\t\t\t\t\t\t\"width\": 5\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"buildings\": {\n\t\t\t\"data\": {\n\t\t\t\t\"source\": \"xyz_osm\"\n\t\t\t},\n\t\t\t\"draw\": {\n\t\t\t\t\"polygons\": {\n\t\t\t\t\t\"order\": \"function() { return feature.sort_rank; }\",\n\t\t\t\t\t\"color\": \"#E9EBEB\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"3d-buildings\": {\n\t\t\t\t\"filter\": {\n\t\t\t\t\t\"$zoom\": {\n\t\t\t\t\t\t\"min\": 15\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"draw\": {\n\t\t\t\t\t\"polygons\": {\n\t\t\t\t\t\t\"extrude\": \"function () { return feature.height > 20 || $zoom >= 16; }\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default SCENE;\n","import React from 'react';\nimport { Map, Marker, Polygon, Icon } from 'react-leaflet';\nimport L from 'leaflet';\nimport { xyz } from './here'\nimport Tangram from 'tangram';\n\nimport SCENE from './SCENE'\n\nexport class MapContainer extends React.Component {\n\n   constructor(props) {\n      super(props);\n      this.marker = React.createRef();\n\n      this.state = {\n         loaded: false,\n         scene: SCENE,\n         layer: null\n      }\n   }\n\n   componentDidMount () {\n      this.setState({\n         layer: Tangram.leafletLayer({\n            scene: this.state.scene\n         })\n      }, () => {\n         this.state.layer.scene.subscribe({\n            load: (scene) => {\n               this.setState({\n                  loaded: true\n               })\n            }\n         })\n         this.state.layer.addTo(this.map.leafletElement);\n      })\n   }\n\n   componentDidUpdate() {\n      if (this.state.loaded) {\n         this.state.layer.scene.config.sources._boston_alcohol.url = `https://xyz.api.here.com/hub/spaces/${xyz.space}/tile/web/{z}_{x}_{y}?tags=` + this.props.filterTags.join(',');\n         this.state.layer.scene.updateConfig()\n         console.log(this.state.layer.scene.config.sources._boston_alcohol.url)\n      }\n   }\n\n   handleDrag = () => {\n      const coordinates = this.marker.current.leafletElement.getLatLng();\n      this.props.handleMarkerMove([coordinates.lat, coordinates.lng]);\n   }\n\n   handleClick = (evt) => {\n      this.props.handleMarkerMove([evt.latlng.lat, evt.latlng.lng])\n   }\n\n   render() {\n      var greenIcon = new L.Icon({\n         iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n         shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n         iconSize: [25, 41],\n         iconAnchor: [12, 41],\n         popupAnchor: [1, -34],\n         shadowSize: [41, 41]\n      });\n      console.log(this.props.filterTags);\n      return (\n            <Map\n               ref={(ref) => { this.map = ref }}\n               center={this.props.center}\n               zoom={this.props.zoom}\n               zoomControl={false}\n               onClick={this.handleClick}\n            >\n               {\n                  this.props.markerPosition.length &&\n                  <Marker\n                     position={this.props.markerPosition}\n                     draggable={true}\n                     onDragEnd={this.handleDrag}\n                     ref={this.marker}\n                     icon={greenIcon}\n                  />\n               }\n               {\n                  this.props.polygon.length &&\n                  <Polygon\n                     positions={this.props.polygon}\n                     color=\"#FF8281\"\n                  />\n               }\n            </Map>\n      )\n   }\n}\n","import React from 'react';\nimport './App.css';\nimport { MapContainer } from './MapContainer';\nimport { hereIsolineUrl, hereReverseGeocodeUrl } from './here';\n\nimport pointsWithinPolygon from '@turf/points-within-polygon';\nimport {polygon} from '@turf/helpers'\nimport { categories } from './config.js'\n\nclass App extends React.Component {\n\n   constructor(props) {\n      super(props);\n      this.state = {\n         name: 'Seattle, WA',\n         startCoordinates: [42.35999762427866, -71.05780662703944],\n         polygon: [],\n         markerPosition: [],\n         filterTags: '',\n         zoom: 14,\n         range: 20,\n         address: '',\n         categories: categories\n      }\n   }\n\n\n   componentDidMount = () => {\n\n      fetch('https://xyz.api.here.com/hub/spaces/PaLBoFL4/search?access_token=AbuvUKANJJEZR4nb1zkEXBE&tags=')\n         .then(res => res.json())\n         .then(res => {\n            this.setState({\n               points: res\n            })\n         });\n   }\n\n   updatePolygon = () => {\n      fetch(hereIsolineUrl(this.state.markerPosition, this.state.range))\n      .then(res => res.json())\n      .then(res => {\n         if (res.hasOwnProperty('response')) {\n            const turfPoly = polygon([res.response.isoline[0].component[0].shape.map(x => [Number(x.split(',')[1]), Number(x.split(',')[0])])]);\n\n            const within = pointsWithinPolygon(this.state.points, turfPoly);\n\n            const tags = within.features.map(feature => feature.properties.Index);\n\n            this.setState({\n               filterTags: tags,\n               polygon: res.response.isoline[0].component[0].shape.map(x => [x.split(',')[0], x.split(',')[1]])\n            })\n         } else {\n            this.setState({\n               polygon: [],\n               filterTags: ''\n            })\n         }\n      });\n   }\n\n   updateAddressText = () => {\n      fetch(hereReverseGeocodeUrl(this.state.markerPosition))\n      .then(res => res.json())\n      .then(res => {\n         console.log(res);\n         const address = res.Response.View[0].Result[0].Location.Address;\n         console.log(address);\n         this.setState({\n            address: `${address.HouseNumber !== undefined ? address.HouseNumber : ''}  ${address.Street !== undefined ? address.Street : ''} ${address.City}`\n         })\n      })\n   }\n\n   handleMarkerMove = (coordinates) => {\n      this.setState({\n         markerPosition: coordinates\n      }, () => {\n         this.updatePolygon();\n         this.updateAddressText();\n      })\n   }\n\n   handleSlide = (evt) => {\n      this.setState({\n         range: evt.target.value\n      },() => {\n         this.updatePolygon();\n      })\n   }\n\n   handleClearMarker = () => {\n      this.setState({\n         markerPosition: [],\n      }, () => {\n         this.updatePolygon();\n      })\n   }\n\n   handleCategoryFilter = (evt) => {\n      console.log(evt.target);\n      const copy = this.state.categories.slice();\n\n      this.setState({\n         categories: copy.map(c => {\n            if (c.id === evt.target.id) {\n               c.active = !c.active;\n            }\n            return c;\n         })\n      })\n\n   }\n\n   render() {\n      return (\n         <div className=\"app\">\n            <div className=\"sidebar\">\n               <h1>Boston Liquor Licenses 🍻</h1>\n               <p>List of establishments with liqour licenses in Boston, MA from 2016.</p>\n               <h2>Establishment type</h2>\n\n               {\n                  this.state.categories.map(\n                     (cat, i) =>\n                     <div className=\"line-parent\" key={i}>\n                           <div className=\"line\" id={`${cat.id}-label`} style={{background: cat.background}}></div>\n                           {cat.label}\n                     </div>\n                  )\n               }\n               <h2>Explore establishments in walking distance</h2>\n               {\n                  !this.state.markerPosition.length &&\n                  <p>Click the map to add a draggable marker</p>\n               }\n\n               {\n                  this.state.markerPosition.length &&\n                  <div>\n                     <div>\n                        <input\n                           type=\"range\"\n                           value={this.state.range}\n                           min=\"1\"\n                           max=\"60\"\n                           onChange={this.handleSlide}\n                        />\n                        {this.state.range}{\" minutes\"}\n                     </div>\n                     <p>Within a <strong>{this.state.range}</strong> minute walk of <strong>{this.state.address}</strong>, there are <strong>{this.state.filterTags.length}</strong> establishments that serve liquor.</p>\n                     <button\n                        onClick={this.handleClearMarker}\n                     >\n                        Clear Isoline Filter\n                     </button>\n                  </div>\n               }\n               <a id=\"link\" href=\"https://here.xyz\">Get mappy with HERE XYZ</a>\n            </div>\n            <div className=\"map-grid\">\n\n               <MapContainer\n                  center={this.state.startCoordinates}\n                  zoom={this.state.zoom}\n                  handleMarkerMove={this.handleMarkerMove}\n                  polygon={this.state.polygon}\n                  filterTags={this.state.filterTags.length > 0 ? this.state.filterTags : []}\n                  markerPosition={this.state.markerPosition}\n               />\n\n\n            </div>\n         </div>\n      );\n   }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}